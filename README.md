# سیستم آزمون آنلاین قرآن

یک سیستم پیشرفته و حرفه‌ای برای برگزاری آزمون‌های آنلاین قرآن با پشتیبانی کامل از زبان فارسی و عربی.

## ویژگی‌ها

### Phase 1 - ویژگی‌های اصلی
- ✅ سیستم احراز هویت کامل (ورود/ثبت‌نام)
- ✅ پنل مدیریت پیشرفته
- ✅ مدیریت آزمون‌ها (ایجاد، ویرایش، حذف)
- ✅ مدیریت سوالات (ایجاد، ویرایش، حذف، واردات از Word/Excel)
- ✅ برگزاری آزمون آنلاین با تایمر
- ✅ ذخیره خودکار پاسخ‌ها
- ✅ ارسال خودکار آزمون
- ✅ نمایش نتایج فوری با گزارش کامل
- ✅ تاریخچه آزمون‌ها
- ✅ سیستم تیکت پشتیبانی
- ✅ مدیریت محتوای صفحه اصلی
- ✅ پشتیبانی کامل RTL و فونت‌های فارسی/عربی

### Phase 2 - ویژگی‌های پیشرفته
- ✅ سیستم اشتراک و پرداخت
- ✅ مدیریت پلن‌های اشتراک
- ✅ گزارش‌های پیشرفته با نمودار
- ✅ خروجی Excel برای گزارش‌ها
- ✅ بهبود UI/UX

### Phase 3 - ویژگی‌های پریمیوم
- ✅ تولید PDF گزارش آزمون با پشتیبانی کامل از عربی
- ✅ سیستم رده‌بندی (Leaderboard)
- ✅ بهینه‌سازی موبایل
- ✅ رابط کاربری مدرن و حرفه‌ای

## تکنولوژی‌ها

- **Frontend**: Next.js 14, React, TypeScript
- **Styling**: Tailwind CSS, shadcn/ui
- **Database**: PostgreSQL, Prisma ORM
- **Authentication**: NextAuth.js
- **PDF Generation**: jsPDF
- **Charts**: Recharts
- **File Parsing**: mammoth (Word), xlsx (Excel)

## نصب و راه‌اندازی

### پیش‌نیازها
- Node.js 18+
- PostgreSQL
- npm یا yarn

### مراحل نصب

1. **کلون کردن پروژه**
```bash
git clone <repository-url>
cd hefztest
```

2. **نصب وابستگی‌ها**
```bash
npm install
```

3. **تنظیم متغیرهای محیطی**
فایل `.env` را ایجاد کنید:
```env
DATABASE_URL="postgresql://user:password@localhost:5432/dbname"
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="http://localhost:3000"
```

4. **راه‌اندازی دیتابیس**
```bash
npx prisma migrate dev
npx prisma generate
```

5. **اجرای پروژه**
```bash
npm run dev
```

پروژه در آدرس `http://localhost:3000` در دسترس خواهد بود.

## ساختار پروژه

```
src/
├── app/                    # صفحات Next.js
│   ├── (admin)/           # صفحات مدیریت
│   ├── (auth)/            # صفحات احراز هویت
│   ├── (user)/            # صفحات کاربر
│   └── api/               # API routes
├── components/             # کامپوننت‌های React
│   ├── admin/             # کامپوننت‌های مدیریت
│   ├── common/            # کامپوننت‌های مشترک
│   └── ui/                # کامپوننت‌های UI
├── lib/                   # توابع کمکی
│   ├── auth.ts            # تنظیمات NextAuth
│   ├── db.ts              # Prisma Client
│   ├── leaderboard.ts     # منطق رده‌بندی
│   ├── pdf-generator.ts   # تولید PDF
│   └── parsers/           # پارسرهای فایل
└── types/                 # TypeScript types
```

## استفاده

### ایجاد کاربر مدیر
برای ایجاد اولین کاربر مدیر، می‌توانید از Prisma Studio استفاده کنید:
```bash
npx prisma studio
```

یا مستقیماً در دیتابیس:
```sql
-- پس از هش کردن رمز عبور با bcrypt
INSERT INTO "User" (email, password, name, role, "isActive") 
VALUES ('admin@example.com', '$2a$10$...', 'مدیر', 'ADMIN', true);
```

### وارد کردن سوالات
1. به پنل مدیریت بروید
2. بخش "سوالات" را انتخاب کنید
3. "واردات از فایل" را کلیک کنید
4. فایل Word (.docx) یا Excel (.xlsx) را آپلود کنید

### ایجاد آزمون
1. به بخش "آزمون‌ها" در پنل مدیریت بروید
2. "ایجاد آزمون جدید" را کلیک کنید
3. اطلاعات آزمون را وارد کنید
4. نوع انتخاب سوالات را انتخاب کنید (سال، جزء، یا تصادفی)

## ویژگی‌های امنیتی

- ✅ هش کردن رمز عبور با bcrypt
- ✅ مدیریت نشست با NextAuth
- ✅ کنترل دسترسی بر اساس نقش
- ✅ محافظت از API routes
- ✅ اعتبارسنجی ورودی‌ها با Zod

## پشتیبانی

برای پشتیبانی فنی، از سیستم تیکت در پنل کاربری استفاده کنید.

## مجوز

این پروژه تحت مجوز MIT منتشر شده است.
